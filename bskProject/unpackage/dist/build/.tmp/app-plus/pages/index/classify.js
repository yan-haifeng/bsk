(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/classify"],{"145e":function(e,t,a){},"28a8":function(e,t,a){"use strict";a.r(t);var n=a("8797"),s=a("39c6");for(var i in s)"default"!==i&&function(e){a.d(t,e,function(){return s[e]})}(i);a("bfd1");var o=a("2877"),c=Object(o["a"])(s["default"],n["a"],n["b"],!1,null,null,null);t["default"]=c.exports},"39c6":function(e,t,a){"use strict";a.r(t);var n=a("6605"),s=a.n(n);for(var i in n)"default"!==i&&function(e){a.d(t,e,function(){return n[e]})}(i);t["default"]=s.a},6605:function(e,t,a){"use strict";(function(e,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(){return a.e("components/uni-nav-bar/uni-nav-bar").then(a.bind(null,"07f2"))},i=function(){return a.e("components/wuc-tab/wuc-tab").then(a.bind(null,"df7b"))},o=function(){return a.e("components/wuc-tab1/wuc-tab1").then(a.bind(null,"47c3"))},c=function(){return a.e("components/my-components/cake-card-mini").then(a.bind(null,"eb8c"))},l=function(){return Promise.all([a.e("common/vendor"),a.e("components/mescroll-uni/mescroll-uni")]).then(a.bind(null,"d833"))},u=function(){return Promise.all([a.e("common/vendor"),a.e("components/my-components/cake-infomation")]).then(a.bind(null,"034c"))},r=function(){return a.e("components/popup-layer/popup-layer").then(a.bind(null,"eadf"))},f={components:{uniNavBar:s,WucTab:i,WucTab1:o,cakeCardMini:c,mescrollUni:l,cakeInfomationBar:u,popupLayer:r},data:function(){return{httpDataUrl:this.$httpUrl.dataUrl,httpStaticUrl:this.$httpUrl.staticUrl,scrollviewHigh:0,cakeinfomation:{},cakeInfomationOnShow:!1,tabList1:[{name:"经典"},{name:"女神"},{name:"蜜糖"},{name:"伴手礼"}],TabCur1:0,tabList2:[{name:"经典2"},{name:"女神2"},{name:"蜜糖2"},{name:"蜜糖2"},{name:"伴手礼2"}],TabCur2:0,mescroll:[],tempFlag:0,New:[],downOption:{use:!0,auto:!0},upOption:[{use:!0,auto:!1,page:{num:0,size:8},noMoreSize:5,empty:{tip:"暂无相关数据"}}],dataList:[]}},onLoad:function(){var t=this;e.request({url:this.httpDataUrl+"/cakeClass/getAllCakeClass",success:function(e){t.tabList1=e.data.data,t.upOption=[],t.tabList1.forEach(function(e,a){t.requestCakeByClassMinId(a,0),t.upOption.push({use:!0,auto:!1,page:{num:0,size:8},noMoreSize:5,empty:{tip:"暂无相关数据"}})}),t.requestClass2(t.tabList1[0].cakeclassId)}})},onShow:function(){},onReady:function(){var t=this;console.log(n("onReady----start"," at pages\\index\\classify.vue:147")),e.getSystemInfo({success:function(a){t.phoneHeight=a.windowHeight,console.log(n(a.windowHeight," at pages\\index\\classify.vue:153"));var s=e.createSelectorQuery().select("#header"),i=e.createSelectorQuery().select("#header1");s.boundingClientRect(function(e){console.log(n(e," at pages\\index\\classify.vue:158")),t.navHeight=e.height,console.log(n("scrollviewHigh:  "+t.scrollviewHigh," at pages\\index\\classify.vue:161"))}).exec(),i.boundingClientRect(function(e){console.log(n(e," at pages\\index\\classify.vue:164")),t.navHeight=t.navHeight+e.height,t.scrollviewHigh=t.phoneHeight-t.navHeight;var a=t.phoneHeight-t.navHeight;console.log(n("scrollviewHigh:  "+a," at pages\\index\\classify.vue:169"))}).exec()}}),console.log(n("onReady----stop"," at pages\\index\\classify.vue:197"))},methods:{tabChange1:function(e){this.TabCur1=e,this.TabCur2=0,this.requestClass2(this.tabList1[e].cakeclassId),console.log(n("点击"," at pages\\index\\classify.vue:206")),this.downCallback(this.mescroll[this.TabCur1])},swiperChange1:function(e){var t=e.target.current;this.TabCur1=t,console.log(n("滑动"," at pages\\index\\classify.vue:215")),this.requestClass2(this.tabList1[this.TabCur1].cakeclassId),this.downCallback(this.mescroll[this.TabCur1])},tabChange2:function(e){this.TabCur2=e,this.New[this.TabCur1]=[],this.downCallback(this.mescroll[this.TabCur1])},swiperChange2:function(e){var t=e.target.current;this.TabCur2=t},requestClass2:function(t){var a=this;this.tabList2=[],e.request({url:this.httpDataUrl+"/cakeClassMin/getAllCakeClassMinByClassId",data:{cakeclassminClassid:t},success:function(e){a.tabList2=e.data.data,a.tabList2.unshift({cakeclassminId:0,cakeclassminClassid:t,cakeclassminName:"全部",cakeclassminInfo:""})}})},requestCakeByClassMinId:function(t,a){var n=this;this.New[t]=[],0==a?e.request({url:this.httpDataUrl+"/cakeInfo/getAllCakeInfoByClassId",data:{cakeClassid:this.tabList1[t].cakeclassId,page:1,limit:8},success:function(e){n.New[t]=e.data.data,n.$forceUpdate()}}):e.request({url:this.httpDataUrl+"/cakeInfo/getAllCakeInfoByClassMinId",data:{cakeClassminid:a,page:1,limit:8},success:function(e){n.New[t]=e.data.data,n.$forceUpdate()}})},downCallback:function(e){this.tempFlag++,this.tempFlag<=this.tabList1.length&&(this.mescroll.push(e),console.log(n(this.tempFlag," at pages\\index\\classify.vue:297")));console.log(n(this.tabList1[this.TabCur1]," at pages\\index\\classify.vue:301")),e.resetUpScroll()},upCallback:function(t){console.log(n("upCallback: ----start :"," at pages\\index\\classify.vue:377")),console.log(n(t," at pages\\index\\classify.vue:378"));var a=t.num,s=t.size,i=this;console.log(n(a+" "+s," at pages\\index\\classify.vue:383")),setTimeout(function(){0==i.tabList2[i.TabCur2].cakeclassminId?e.request({url:i.httpDataUrl+"/cakeInfo/getAllCakeInfoByClassId",data:{cakeClassid:i.tabList1[i.TabCur1].cakeclassId,page:a,limit:s},success:function(e){var a=e.data.data,s=e.data.count;1==t.num&&(i.New[i.TabCur1]=[]),i.New[i.TabCur1]=i.New[i.TabCur1].concat(a),console.log(n(i.New[i.TabCur1]," at pages\\index\\classify.vue:402")),t.endBySize(a.length,s)},fail:function(){t.endErr()},complete:function(){i.$forceUpdate()}}):e.request({url:i.httpDataUrl+"/cakeInfo/getAllCakeInfoByClassMinId",data:{cakeClassminid:i.tabList2[i.TabCur2].cakeclassminId,page:a,limit:s},success:function(e){var a=e.data.data,s=e.data.count;1==t.num&&(i.New[i.TabCur1]=[]),i.New[i.TabCur1]=i.New[i.TabCur1].concat(a),console.log(n(i.New[i.TabCur1]," at pages\\index\\classify.vue:433")),t.endBySize(a.length,s)},fail:function(){t.endErr()},complete:function(){i.$forceUpdate()}})},1e3),console.log(n("upCallback: ----stop :"," at pages\\index\\classify.vue:451"))},pupopOpen:function(e){this.cakeInfomationOnShow=!0,this.cakeinfomation=e,this.$refs.popupRef.show(),this.$refs.infomationBar.Initialization()},pupopClose:function(){this.cakeInfomationOnShow=!1,this.$refs.popupRef.close()}},onHide:function(){this.$refs.popupRef.close()}};t.default=f}).call(this,a("6e42")["default"],a("0de9")["default"])},8797:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement;e._self._c},s=[];a.d(t,"a",function(){return n}),a.d(t,"b",function(){return s})},bfd1:function(e,t,a){"use strict";var n=a("145e"),s=a.n(n);s.a},c955:function(e,t,a){"use strict";(function(e){a("5399"),a("921b");n(a("66fd"));var t=n(a("28a8"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,a("6e42")["createPage"])}},[["c955","common/runtime","common/vendor"]]]);